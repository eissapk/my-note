"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],a=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw l}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/my-note/serviceWorker.js").then(function(e){return console.log("service worker registered")}).catch(function(e){return console.log("service worker not registered",e)})});var Nav=function(){function l(){_classCallCheck(this,l)}return _createClass(l,null,[{key:"global",value:function(){l.modeCon=document.getElementById("mode"),l.mode=!0}},{key:"modeSwitcher",value:function(e){var t=_slicedToArray(document.querySelectorAll("#mode button"),2),n=t[0],a=t[1],r=document.querySelector("[title=darkmode]");e.target.classList.contains("toggleMode")&&(l.mode?(n.classList.add("activeMode"),a.classList.remove("activeMode"),r.removeAttribute("disabled"),l.mode=!1):(n.classList.remove("activeMode"),a.classList.add("activeMode"),r.setAttribute("disabled",""),l.mode=!0))}}]),l}(),Header=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"global",value:function(){}},{key:"syncDate",value:function(){var e=document.querySelector("#date h1"),t=document.querySelector("#date p"),n=new Date,a=n.getHours(),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12][a],l="",o="";l=1==String(r).length?"0".concat(r):"".concat(r),o=12<=a?"PM":"AM";var c=n.getMinutes(),s="";s=1==String(c).length?"0".concat(c):"".concat(c);var i=n.getMonth(),u=n.getDate();e.innerHTML="".concat(l," : ").concat(s,' <i id="am-pm">').concat(o,"</i>"),t.innerHTML="".concat(["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"][i]," ").concat(u)}}]),e}(),Tabs=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"global",value:function(){n.slider=document.getElementById("tabsSlider"),n.btnsCon=document.querySelector(".sliderBtns"),n.isDown=!1}},{key:"tabSwichter",value:function(e){var t=document.getElementById("selectAll"),n=e.target,a=document.querySelectorAll(".tab");(e.target.classList.contains("tab")||e.target.classList.contains("tasksNum")||e.target.classList.contains("noteTitle"))&&(a.forEach(function(e){return e.classList.remove("currentTab")}),t.checked=!1),e.target.classList.contains("tab")&&n.classList.add("currentTab"),e.target.classList.contains("tasksNum")&&n.parentElement.classList.add("currentTab"),e.target.classList.contains("noteTitle")&&n.parentElement.classList.add("currentTab")}},{key:"noteTitle",value:function(){var e=document.querySelectorAll(".noteTitle");e.forEach(function(a){a.addEventListener("keyup",function(n){var e=Store.getTask(),t=document.querySelector(".currentTab").querySelectorAll(".content .textCon");a.setAttribute("title","".concat(n.target.value)),t.forEach(function(t){t.setAttribute("data-tab","".concat(n.target.value)),e.forEach(function(e){e.id==t.getAttribute("data-id")&&(e.tab=n.target.value)}),localStorage.setItem("tasks",JSON.stringify(e))})})}),e.forEach(function(e){e.setAttribute("title","".concat(e.value))})}},{key:"navigateTabs",value:function(e){e.target.classList.contains("nextBtn")&&n.slider.scrollBy({top:0,left:170,behavior:"smooth"}),e.target.classList.contains("prevBtn")&&n.slider.scrollBy({top:0,left:-170,behavior:"smooth"})}},{key:"navSliderByMouse",value:function(){n.slider.addEventListener("mousedown",function(e){n.isDown=!0,n.startX=e.pageX-n.slider.offsetLeft,n.scrollLeft=n.slider.scrollLeft}),n.slider.addEventListener("mouseleave",function(){n.isDown=!1}),n.slider.addEventListener("mouseup",function(){n.isDown=!1}),n.slider.addEventListener("mousemove",function(e){if(n.isDown){e.preventDefault();var t=e.pageX-n.slider.offsetLeft-n.startX;n.slider.scrollLeft=n.scrollLeft-t}})}},{key:"navSliderByTouch",value:function(){n.slider.addEventListener("touchstart",function(e){n.isDown=!0,n.startX=e.touches[0].pageX-n.slider.offsetLeft,n.scrollLeft=n.slider.scrollLeft}),n.slider.addEventListener("touchend",function(){n.isDown=!1}),n.slider.addEventListener("touchmove",function(e){if(n.isDown){e.stopPropagation();var t=e.touches[0].pageX-n.slider.offsetLeft-n.startX;n.slider.scrollLeft=n.scrollLeft-t}})}}]),n}(),UI=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"global",value:function(){o.slider=document.getElementById("tabsSlider"),o.addNoteBtnCon=document.getElementById("addNote"),o.saveBtn=document.getElementById("saveBtn"),o.delBtnCon=document.querySelector(".deleteCon"),o.all=document.getElementById("selectAll"),o.tabNum=2}},{key:"showTextarea",value:function(e){var t=document.getElementById("inputBoxWrapper"),n=t.querySelector("#input");e.target.classList.contains("addNoteBtn")&&(t.style.display="block",n.focus())}},{key:"hideTextarea",value:function(){document.querySelectorAll(".cancelBtn").forEach(function(e){return e.addEventListener("click",function(e){return e.target.parentElement.parentElement.parentElement.style.display="none"})})}},{key:"addNewTab",value:function(e){var t=document.getElementById("tabsSlider"),n=document.getElementById("addNewTab");if(e.target.classList.contains("clickAddTab")){var a=o.tabNum++;0===document.querySelectorAll(".tab").length&&(o.tabNum=1,a=o.tabNum++);var r=document.querySelector(".currentTab");r&&r.classList.remove("currentTab");var l=document.createElement("div");l.className="tab currentTab",l.innerHTML='\n                                <span class="tasksNum"></span>\n\n                                <input class="noteTitle" type="text" value="New Note ('.concat(a,')" placeholder="New Note (').concat(a,')" readonly>\n                                \n                                <button class="xBtn" type="button">\n                                    <i class="clickXBtn"></i>\n                                    <span class="clickXBtn"></span>\n                                    <span class="clickXBtn"></span>\n                                </button>\n                                \n                                <div class="content">\n                                    <ul></ul>\n                                </div>\n                                '),t.insertBefore(l,n),Tabs.noteTitle(),o.animateTabBtn()}}},{key:"removeTab",value:function(n){var a=document.getElementById("checkQWrapper"),e=document.getElementById("checkQ");if(n.target.classList.contains("clickXBtn")){if(e.innerHTML='\n                                <div>\n                                    <p>Are you really want to delete this?</p>\n                                </div>\n                                <div>\n                                    <button type="button" id="cancelBtn2">cancel</button>\n                                    <button type="button" id="deleteBtn">delete</button>\n                                </div>\n                                ',0<n.target.parentElement.parentElement.querySelectorAll(".content li").length)a.style.display="block";else{var t=n.target.parentElement.parentElement;document.querySelectorAll(".tab").forEach(function(e){return e.classList.remove("currentTab")});var r=t.previousElementSibling;r?r.classList.add("currentTab"):t.nextElementSibling.classList.add("currentTab"),Store.removeTab(t),t.remove()}document.getElementById("deleteBtn").addEventListener("click",function(){var e=n.target.parentElement.parentElement;document.querySelectorAll(".tab").forEach(function(e){return e.classList.remove("currentTab")});var t=e.previousElementSibling;t?t.classList.add("currentTab"):e.nextElementSibling.classList.add("currentTab"),Store.removeTab(e),e.remove(),a.style.display="none",o.animateTabBtn()}),document.getElementById("cancelBtn2").addEventListener("click",function(){return a.style.display="none"}),o.animateTabBtn()}}},{key:"addTask",value:function(){return new Promise(function(e,t){var n=document.getElementById("input"),a=document.querySelector(".currentTab .content ul");if(1,document.querySelector(".tab"))if(""!=n.value.trim()){var r=document.createElement("li");r.innerHTML='\n                                <span class="editCon">\n                                    <img src="img/edit-pen.svg" class="editNote" alt="edit-pen">\n                                </span>\n                                <span class="selectCon">\n                                    <label>\n                                        <input class="selectItem" type="checkbox">\n                                        <span class="check"></span>\n                                    </label>\n                                </span>\n                                <span class="textCon" data-id="'.concat(o.makeId(),'" data-tab="').concat(o.getTabTitle(),'">').concat(n.value,"</span>\n                                "),a.append(r),Store.addTask(r),o.tasksNum(),n.value="",document.getElementById("inputBoxWrapper").style.display="none"}else{var l=document.getElementById("inputBox");l.classList.add("emptyInput"),setTimeout(function(){l.classList.remove("emptyInput")},300)}else alert("Please create a tab!");e()})}},{key:"removeTask",value:function(e){e.target.classList.contains("deleteBtn")&&(document.querySelectorAll(".currentTab .content li .selectItem").forEach(function(e){if(e.checked){var t=e.parentElement.parentElement.parentElement,n=t.querySelector(".textCon").getAttribute("data-id");t.remove(),Store.removeTask(n)}}),document.getElementById("selectAll").checked=!1,o.tasksNum())}},{key:"editTask",value:function(e){var t=document.getElementById("editBoxWrapper");if(e.target.classList.contains("editNote")){var n=e.target.parentElement.parentElement.querySelector(".textCon"),a=n.getAttribute("data-id");t.innerHTML='\n                                <div id="editBox">\n                                <div class="top">\n                                    <button class="cancelBtn" type="button">cancel</button>\n                                    <button type="button" id="updateBtn">update</button>\n                                </div>\n                                <div class="bottom">\n                                    <textarea id="editInput" placeholder="Edit Your Note Here..."></textarea>\n                                </div>\n                                </div>\n                                ';var r=document.getElementById("editInput"),l=document.getElementById("updateBtn");o.hideTextarea(),t.style.display="block",r.value=n.textContent,r.focus(),l.addEventListener("click",function(){n.textContent=r.value,Store.editTask(a,r.value),t.style.display="none",r.value=""})}}},{key:"makeId",value:function(){return(new Date).getTime()}},{key:"getTabTitle",value:function(){return document.querySelector(".currentTab").querySelector(".noteTitle").value}},{key:"tasksNum",value:function(){var e=document.querySelector(".currentTab"),t=e.querySelectorAll(".content ul li"),n=e.querySelector(".tasksNum");t.length<1?n.textContent="":n.textContent="(".concat(t.length,")")}},{key:"selectAll",value:function(){var e=document.getElementById("selectAll"),t=document.querySelectorAll(".currentTab .content li .selectItem");e.checked?t.forEach(function(e){return e.checked=!0}):t.forEach(function(e){return e.checked=!1})}},{key:"animateTabBtn",value:function(){var e=Store.getTask(),t=document.querySelectorAll(".tab"),n=Array.from(t),a=document.querySelector("#addNewTab div");0<e.length||0<n.length?a.classList.remove("animateAddNewTab"):a.classList.add("animateAddNewTab")}},{key:"renameTab",value:function(e){if(e.target.classList.contains("noteTitle")){var t=(new Date).getTime()-o.lastTap;t<600&&0<t&&(e.target.removeAttribute("readonly"),e.target.focus(),e.target.style.cursor="text"),o.lastTap=(new Date).getTime()}}},{key:"disableRename",value:function(e){e.target.classList.contains("noteTitle")&&(e.target.setAttribute("readonly",""),e.target.style.cursor="pointer")}},{key:"engine",value:function(){var r=document.getElementById("engine");r.addEventListener("keyup",function(){var t=r.value.toLowerCase().replace(/^\s+/g,"").slice(0,3),e=document.querySelectorAll(".currentTab .content li"),n=Array.from(e),a=n.filter(function(e){return e.querySelector(".textCon").textContent.toLowerCase().includes(t)});0<a.length?(n.forEach(function(e){return e.style.display="none"}),a.forEach(function(e){return e.style.display="grid"})):n.forEach(function(e){return e.style.display="grid"})})}}]),o}(),Store=function(){function d(e,t,n){_classCallCheck(this,d),this.tab=e,this.id=t,this.text=n}return _createClass(d,null,[{key:"getTask",value:function(){return null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks"))}},{key:"addTask",value:function(e){var t=d.getTask(),n=e.querySelector(".textCon");function a(e){return n.getAttribute("data-".concat(e))}var r=new d(a("tab"),a("id"),n.textContent);t.push(r),localStorage.setItem("tasks",JSON.stringify(t))}},{key:"removeTask",value:function(n){var a=d.getTask();a.forEach(function(e,t){e.id==n&&a.splice(t,1)}),localStorage.setItem("tasks",JSON.stringify(a))}},{key:"editTask",value:function(t,n){var e=d.getTask();e.forEach(function(e){e.id==t&&(e.text=n)}),localStorage.setItem("tasks",JSON.stringify(e))}},{key:"removeTab",value:function(e){var a=d.getTask();e.querySelectorAll(".content .textCon").forEach(function(n){a.forEach(function(e,t){e.id==n.getAttribute("data-id")&&a.splice(t,1)})}),localStorage.setItem("tasks",JSON.stringify(a))}},{key:"loadTasks",value:function(){var r=document.getElementById("tabsSlider"),l=document.getElementById("addNewTab"),o=d.getTask(),e=o.map(function(e){return e.tab}),t=_toConsumableArray(new Set(e)),n=!0,a=!1,c=void 0;try{for(var s,i=function(){var t=s.value,e=o.filter(function(e){return e.tab===t}),n="";e.forEach(function(e){n+='\n                                        <li>\n                                            <span class="editCon">\n                                                <img src="img/edit-pen.svg" class="editNote" alt="edit-pen">\n                                            </span>\n                                            <span class="selectCon">\n                                                <label>\n                                                    <input class="selectItem" type="checkbox">\n                                                    <span class="check"></span>\n                                                </label>\n                                            </span>\n                                            <span class="textCon" data-id="'.concat(e.id,'" data-tab="').concat(e.tab,'">').concat(e.text,"</span>\n                                        </li>\n                                        ")});var a=document.createElement("div");a.className="tab",a.innerHTML='\n                                <span class="tasksNum">('.concat(e.length,')</span>\n                                <input class="noteTitle" type="text" value="').concat(t,'" placeholder="New Note" readonly>\n                                <button class="xBtn" type="button">\n                                    <i class="clickXBtn"></i>\n                                    <span class="clickXBtn"></span>\n                                    <span class="clickXBtn"></span>\n                                </button>\n                                <div class="content">\n                                    <ul>').concat(n,"</ul>\n                                </div>\n                                "),r.insertBefore(a,l),document.querySelector(".tab").classList.add("currentTab")},u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0)i()}catch(e){a=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw c}}}}]),d}();Nav.global(),Header.global(),Tabs.global(),UI.global(),Nav.modeCon.addEventListener("click",Nav.modeSwitcher,!0),Tabs.slider.addEventListener("click",Tabs.tabSwichter,!0),Tabs.btnsCon.addEventListener("click",Tabs.navigateTabs,!0),UI.addNoteBtnCon.addEventListener("click",UI.showTextarea,!0),UI.saveBtn.addEventListener("click",function(){return UI.addTask().catch(function(e){return console.log(e)})},!0),UI.delBtnCon.addEventListener("click",function(e){return UI.removeTask(e)},!0),UI.slider.addEventListener("click",function(e){return UI.editTask(e)},!0),UI.slider.addEventListener("click",function(e){UI.addNewTab(e),UI.removeTab(e)},!0),UI.all.addEventListener("click",UI.selectAll,!0),UI.slider.addEventListener("click",UI.renameTab,!0),UI.slider.addEventListener("blur",UI.disableRename,!0),window.addEventListener("DOMContentLoaded",function(){Header.syncDate(),setInterval(function(){Header.syncDate()},6e4),UI.animateTabBtn(),UI.hideTextarea(),Store.loadTasks(),Tabs.noteTitle(),UI.engine(),Tabs.navSliderByMouse(),Tabs.navSliderByTouch()});
//# sourceMappingURL=../maps/app.min.js.map
